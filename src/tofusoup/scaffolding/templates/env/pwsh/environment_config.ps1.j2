# --- Environment Configuration ---
Write-Header "ðŸ”§ Configuring Environment"

# Set clean PYTHONPATH
$env:PYTHONPATH = "$(Get-Location)/src;$(Get-Location)"
Write-Host "PYTHONPATH: $env:PYTHONPATH"

{% if deduplicate_path %}
# Clean up PATH - remove duplicates and handle cross-platform
if ($IsWindows) {
    $PathSeparator = ';'
    $VenvBin = Join-Path $VenvDir "Scripts"
} else {
    $PathSeparator = ':'
    $VenvBin = Join-Path $VenvDir "bin"
}

$PathArray = $env:PATH -split $PathSeparator | Where-Object { $_ -ne '' } | Select-Object -Unique
$NewPath = @($VenvBin) + ($PathArray | Where-Object { $_ -ne $VenvBin })
$env:PATH = $NewPath -join $PathSeparator
{% endif %}