# --- Platform Detection ---
$TFOS = if ($IsWindows) { "windows" } elseif ($IsMacOS) { "darwin" } else { "linux" }
$TFARCH = switch ([System.Environment]::Is64BitOperatingSystem) {
    $true { 
        if ([System.Runtime.InteropServices.RuntimeInformation]::ProcessArchitecture -eq [System.Runtime.InteropServices.Architecture]::Arm64) {
            "arm64"
        } else {
            "amd64"
        }
    }
    $false { "386" }
}

# Workenv directory setup
$Profile = if ($env:{{ env_profile_var }}) { $env:{{ env_profile_var }} } else { "default" }
if ($Profile -eq "default") {
    $VenvDir = "workenv/{{ venv_prefix }}_${TFOS}_${TFARCH}"
} else {
    $VenvDir = "workenv/${Profile}_${TFOS}_${TFARCH}"
}

$env:UV_PROJECT_ENVIRONMENT = $VenvDir